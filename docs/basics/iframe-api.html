<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="robots" content="noindex">
	<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
	<title>Iframe API - Barney</title>
	<link rel="stylesheet" href="../assets/main.css">

	<!-- Barney Viewer API -->
	<script>(function(B,a,r,n,e,y,_3,D){_3=B[e]||(B[e]={}),_3[n]||(_3[n]=function(c)
	{(_3[n].l||(_3[n].l=[])).push(c);}),D=a.createElement(r),D.async=!0,D.src=y,
	a.head.appendChild(D);}(window,document,'script','onReady','Barney',
	'https://viewer.barney-technologies.com/api.js'));</script>

</head>
<body>

	<div id="wrap">
		
		<h1>Iframe API</h1>

		<div class="lorem small"></div>

		<div id="viewer"></div>

		<p><a href="javascript:void(0)" id="change-background" style="display: none;">Change the background</a></p>

		<div class="lorem large"></div>

		<style>

			/* -------------------------
				VIEWER 16:9
			------------------------- */

			#viewer {
				position: relative;
			}
			#viewer::before {
				content: '';
				display: block;
				padding-bottom: 56.25%;
			}
			#viewer iframe {
				position: absolute;
				top: 0;
				left: 0;
				width: 100%;
				height: 100%;
			}

		</style>

		<script>
			Barney.onReady(() => {

				const viewer = new Barney.ViewerIframe('#viewer', {
					itemId: 'ab67aa4a88bcfef81dee0202',
					viewerVars: {
						'autorotate': true,
						'mouse': 'cooperative',
						'touch': 'cooperative',
					}
				})

				viewer.on('ready', () => {
					
					const button = document.getElementById('change-background')
					button.style.display = ''
					button.addEventListener('click', (event) => {
						event.preventDefault()
						const randomColor = "#" + ((1<<24)*Math.random() | 0).toString(16)
						viewer.setBackground({ color: randomColor })
					})
					
				})

			})
		</script>


	</div>

</body>
</html>