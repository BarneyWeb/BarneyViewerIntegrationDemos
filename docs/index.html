<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="robots" content="noindex">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Barney integration demo</title>
	<link rel="stylesheet" href="assets/index.css">
</head>
<body>

	<div id="menu">
		<h1 class="title">
			<a href="./">Barney Viewer API</a>
			<a class="toggle" href="javascript:void(0)"></a>
		</h1>
		<ul>
			<li>
				<strong>Basics</strong>
				<ul>
					<li><a href="basics/iframe.html" target="viewport">Iframe</a></li>
					<li><a href="basics/iframe-api.html" target="viewport">Iframe API</a></li>
					<li><a href="basics/viewer-tag.html" target="viewport">Viewer tag</a></li>
					<li><a href="basics/viewer-tag-api.html" target="viewport">Viewer tag and API</a></li>
				</ul>
			</li>
			<li><hr></li>
			<li>
				<strong>Advanced</strong>
				<ul>
					<li><a href="advanced/viewer-tag-pointer-proxy.html" target="viewport">Pointer proxy with viewer tag</a></li>
				</ul>
			</li>
			<li><hr></li>
			<li>
				<strong>Sliders</strong>
				<ul>
					<li><a href="sliders/flickity.html" target="viewport">Flickity</a></li>
					<li><a href="sliders/swiper.html" target="viewport">Swiper</a></li>
					<li><a href="sliders/slick.html" target="viewport">Slick</a></li>
					<li><a href="sliders/fotorama.html" target="viewport">Fotorama</a></li>
				</ul>
			</li>
			<li><hr></li>
			<li>
				<strong>Examples</strong>
				<ul>
					<li><a href="examples/iframe-api-custom-ui.html" target="viewport">Custom UI with Iframe API</a></li>
				</ul>
			</li>
		</ul>
	</div>

	<div id="main">
		<iframe name="viewport" frameborder="0"></iframe>
		<a id="source-btn" href="javascript:void(0)" target="_blank" title="View source"></a>
	</div>

	<script>
		(() => {

			/* -------------------------
				MOBILE MENU
			------------------------- */

			const menu = document.querySelector('#menu')
			const menuToggle = menu.querySelector('h1 a.toggle')

			menuToggle.addEventListener('click', (event) => {
				event.preventDefault()
				menu.classList.toggle('-opened')
			})

			
			/* -------------------------
				PAGES
			------------------------- */
			
			const DEFAULT_PAGE = 'general/index.html'
			const GITHUB_URL_TEMPLATE = 'https://github.com/BarneyWeb/BarneyViewerIntegrationDemos/blob/main/docs/{path}?ts=4'

			const viewport = document.querySelector('iframe[name="viewport"]')
			const sourceBtn = document.querySelector('a#source-btn')

			const links = document.querySelectorAll('a[target="viewport"]')
			Array.from(links).forEach((link) => {
				link.addEventListener('click', (event) => {
					event.preventDefault()
					openPage(link.getAttribute('href'))
				})
			})

			window.addEventListener('hashchange', () => invalidateHash())

			function openPage(path) {
				viewport.src = path
				if (path === DEFAULT_PAGE) {
					window.location.hash = ''
				} else {
					window.location.hash = path
					sourceBtn.href = GITHUB_URL_TEMPLATE.replace('{path}', path)
				}
				menu.classList.remove('-opened')
			}

			function invalidateHash() {
				if (window.location.hash) {
					const file = window.location.hash.substring( 1 );
					openPage(file)
				} else {
					openPage(DEFAULT_PAGE)
				}
			}

			invalidateHash()
			

		})()
	</script>

</body>

</html>