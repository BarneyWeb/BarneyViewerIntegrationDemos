<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="robots" content="noindex">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Barney integration demo</title>
	<link rel="stylesheet" href="assets/index.css">
</head>
<body>

	<div id="side">
		<h1 class="title"><a href="./">Barney Viewer API</a></h1>
		<ul>
			<li>
				<strong>Examples</strong>
				<ul>
					<li><a href="examples/iframe-api-custom-ui.html" target="viewport">Custom UI with Iframe API</a></li>
				</ul>
			</li>
		</ul>
	</div>

	<div id="main">
		<iframe name="viewport" frameborder="0"></iframe>
		<a id="source-btn" href="javascript:void(0)" target="_blank" title="View source"></a>
	</div>

	<script>
		(() => {

			const DEFAULT_PAGE = 'general/index.html'
			const GITHUB_ROOT = 'https://github.com/BarneyWeb/BarneyViewerIntegrationDemos/blob/main/docs/'

			const viewport = document.querySelector('iframe[name="viewport"]')
			const sourceBtn = document.querySelector('a#source-btn')

			const links = document.querySelectorAll('a[target="viewport"]')
			Array.from(links).forEach((link) => {
				link.addEventListener('click', (event) => {
					event.preventDefault()
					openPage(link.getAttribute('href'))
				})
			})

			window.addEventListener('hashchange', () => invalidateHash())

			function openPage(path) {
				viewport.src = path
				if (path === DEFAULT_PAGE) {
					window.location.hash = ''
				} else {
					window.location.hash = path
					sourceBtn.href = GITHUB_ROOT + path
				}
			}

			function invalidateHash() {
				if (window.location.hash) {
					const file = window.location.hash.substring( 1 );
					openPage(file)
				} else {
					openPage(DEFAULT_PAGE)
				}
			}

			invalidateHash()

		})()
	</script>

</body>

</html>